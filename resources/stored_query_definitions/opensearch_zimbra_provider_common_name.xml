<csd:careServicesFunction xmlns:csd="urn:ihe:iti:csd:2013" xmlns:os="http://a9.com/-/spec/opensearch/1.1/" xmlns:hfp="http://www.w3.org/2001/XMLSchema-hasFacetAndProperty" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xforms="http://www.w3.org/2002/xforms" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:ihe:iti:csd:2013 CSD.xsd" uuid="3eecaef9-8710-4d1e-8fc0-ccc9893fcce7" content-type="text/xml">
  <csd:description>
    Peforms a search request on a provider's common name according to the OpenSearch 1.1 Specification:
      http://www.opensearch.org/Specifications/OpenSearch/1.1
    Returns search results in opensearch feed for a provider by common name including link to free busy information on Zimbra for scheduling information.
  </csd:description>
  <csd:definition>
    <xi:include parse="text" href="opensearch_zimbra_provider_common_name.xq"/>
  </csd:definition>
  <xforms:model id="">
    <xforms:instance id="care-services-result">
      <csd:careSerivcesResponse id="" code="" content-type=""/>
    </xforms:instance>
    <xforms:instance id="http-post-request">
      <csd:requestParams>
        <os:searchTerms/>
        <os:startPage/>
        <os:startIndex/>
        <os:itemsPerPage/>
        <type/>
        <format/>
        <resource/>
        <searchURL/>
      </csd:requestParams>
    </xforms:instance>
    <xforms:instance id="http-post-response">
      <http:result xmlns:http="http://expath.org/ns/http-client" status="">
        <http:header name="X-CSD-Transaction-ID" value=""/>
        <http:body/>
      </http:result>
    </xforms:instance>
    <xforms:instance id="soap-request">
      <soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
        <soap:Header>
          <wsa:Action xmlns:wsa="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="1">urn:ihe:iti:csd:2013:GetCareServicesRequest</wsa:Action>
          <wsa:MessageID xmlns:wsa="http://www.w3.org/2005/08/addressing"/>
          <wsa:ReplyTo xmlns:wsa="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="1">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
          </wsa:ReplyTo>
          <wsa:To xmlns:wsa="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="1">{$LOCATION}</wsa:To>
        </soap:Header>
        <soap:Body>
          <csd:careServicesRequest urn="">
            <csd:requestParams>
              <os:searchTerms/>
              <os:startPage/>
              <os:startIndex/>
              <os:itemsPerPage/>
              <type/>
              <format/>
              <resource/>
              <searchURL/>
            </csd:requestParams>
          </csd:careServicesRequest>
        </soap:Body>
      </soap:Envelope>
    </xforms:instance>
    <xforms:instance id="soap-response">
      <soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
        <soap:Header>
          <wsa:Action xmlns:wsa="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="1">urn:ihe:iti:csd:2013:GetCareServicesResponse</wsa:Action>
          <wsa:MessageID xmlns:wsa="http://www.w3.org/2005/08/addressing"/>
          <wsa:ReplyTo xmlns:wsa="http://www.w3.org/2005/08/addressing" soap:mustUnderstand="1">
            <wsa:Address>http://www.w3.org/2005/08/addressing/anonymous</wsa:Address>
          </wsa:ReplyTo>
          <wsa:RelatesTo xmlns:wsa="http://www.w3.org/2005/08/addressing"/>
        </soap:Header>
        <soap:Body>
          <csd:careServicesResponse/>
        </soap:Body>
      </soap:Envelope>
    </xforms:instance>
    <xforms:submission id="soap-submission" method="post" mediatype="application/soap+xml" ref="instance('soap-request')" resource="{$LOCATION}"/>
    <xforms:submission id="http-post-submission" method="post" mediatype="text/xml" ref="instance('http-post-request')" resource="{$LOCATION}/"/>
    <xforms:action ev:event="xforms-submit-done" id="http-post-prepare">
      <xforms:insert context="instance('http-post-response')/http:result/http:body" origin="instance('care-services-result')/csd:careServicesResponse/csd:result/*"/>
      <xforms:setValue bind="instance('http-post-response')/http:result/@status" value="instance('care-services-result')/csd:careServicesResponse/@code"/>
      <xforms:setValue bind="instance('http-post-response')/http:body/@content-type" value="instance('care-services-result')/csd:careServicesResponse/@content-type"/>
      <xforms:setValue bind="instance('http-post-response')/http:result/http:header[@name='X-CSD-Transaction-ID']/@value" value="instance('care-services-result')/csd:careServicesResponse/@id"/>
    </xforms:action>
    <xforms:action ev:event="xforms-submit-done" id="soap-prepare">
      <xforms:insert context="instance('soap-response')/soap:Envelope/soap:Body/csd:careServicesResponse/csd:result" origin="instance('care-services-result')/csd:careServicesRepsonse/csd:result/*"/>
      <xforms:insert context="instance('soap-response')/soap:Envelope/soap:Body/csd:careServicesResponse/@content-type" origin="instance('care-services-result')/csd:careServicesRepsonse/@content-type"/>
      <xforms:insert context="instance('soap-response')/soap:Envelope/soap:Body/csd:careServicesResponse/@code" origin="instance('care-services-result')/csd:careServicesRepsonse/@code"/>
      <xforms:setValue bind="instance('soap-response')/soap:Envelope/soap:Header/wsa:messageID" value="instance('soap-request')/csd:careServicesRequest/@id"/>
      <xforms:setValue bind="instance('soap-response')/soap:Envelope/soap:Header/wsa:relatesTo" value="instance('soap-request')/soap:Envelope/soap:Header/wsa:messageID"/>
    </xforms:action>
    <xforms:bind nodeset="instance('http-post-request')/" type="xs:string"/>
    <xforms:bind nodeset="instance('soap-request')/soap:Envelope/soap:Header/soap:Body/csd:careServicesRequest/" type="xs:string"/>
    <xforms:bind nodeset="instance('http-post-request')/" type="xs:integer"/>
    <xforms:bind nodeset="instance('soap-request')/soap:Envelope/soap:Header/soap:Body/csd:careServicesRequest/" type="xs:integer"/>
    <xforms:bind nodeset="instance('http-post-request')/" type="xs:integer"/>
    <xforms:bind nodeset="instance('soap-request')/soap:Envelope/soap:Header/soap:Body/csd:careServicesRequest/" type="xs:integer"/>
    <xforms:bind nodeset="instance('http-post-request')/" type="xs:integer"/>
    <xforms:bind nodeset="instance('soap-request')/soap:Envelope/soap:Header/soap:Body/csd:careServicesRequest/" type="xs:integer"/>
    <xforms:bind nodeset="instance('http-post-request')/" type="xs:string"/>
    <xforms:bind nodeset="instance('soap-request')/soap:Envelope/soap:Header/soap:Body/csd:careServicesRequest/" type="xs:string"/>
    <xforms:bind nodeset="instance('http-post-request')/" type="xs:string"/>
    <xforms:bind nodeset="instance('soap-request')/soap:Envelope/soap:Header/soap:Body/csd:careServicesRequest/" type="xs:string"/>
    <xforms:bind nodeset="instance('http-post-request')/" type="xs:string"/>
    <xforms:bind nodeset="instance('soap-request')/soap:Envelope/soap:Header/soap:Body/csd:careServicesRequest/" type="xs:string"/>
  </xforms:model>
  
   
   
   
   
   
   
   

  <csd:extension type="zimbra" urn="urn:openhie.org:openinfoman:adapter"/>
  <csd:extension type="opensearch" urn="urn:openhie.org:openinfoman:adapter"/>
  <csd:extension type="entity_link" urn="urn:openhie.org:openinfoman:adapter:opensearch">http://csd.ihris.org/cahie/index.php/view_csd_provider?id=csd_provider|</csd:extension>
  <csd:extension type="provider_link" urn="urn:openhie.org:openinfoman:adapter:zimbra">http://csd.ihris.org/cahie/index.php/view_csd_provider?id=csd_provider|</csd:extension>
  <csd:extension type="zimbra_host" urn="urn:openhie.org:openinfoman:adapter:zimbra">ec2-54-216-82-154.eu-west-1.compute.amazonaws.com</csd:extension>
  <csd:extension type="description" urn="urn:openhie.org:openinfoman:adapter:opensearch">
    <os:ShortName>Provider Search / FreeBusy</os:ShortName> <!-- customize with a short name of the search (search title). -->
    <os:Description>Use this search to search for a health care provider by their name and get free busy information from zimbra</os:Description> <!--customize with a description of the search -->
    <os:Tags>search provider csd freebusy zimbra</os:Tags>
    <os:Contact>email@example.org</os:Contact> <!-- customize with your email contact -->
    <os:LongName>CSD Provider Search by Common Name: Zimbra Free Busy</os:LongName> <!--customize with the name of this search to identify your organization -->
    <os:email_contact>email@example.org</os:email_contact> <!-- customize with your email contact -->
    <os:Image height="64" width="64" type="image/png">http://upload.wikimedia.org/wikipedia/commons/7/74/GeoGebra_icon_geogebra.png</os:Image> 
    <os:Query role="example" searchTerms="Constance Peterson"/>
    <os:Developer>OpenInfoMan Developement Team</os:Developer> <!-- customize with your email contact -->
    <os:Attribution>Search data Copyright 2014, OpenInfoManTeam., All Rights Reserved</os:Attribution>
    <os:Language>en-us</os:Language>

  </csd:extension>
</csd:careServicesFunction>